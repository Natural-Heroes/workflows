---
plan: 05-02
phase: 05-testing-deployment
title: Dokploy Deployment
status: ready
requires: [DEPLOY-02]
estimated_complexity: low
---

# Plan: Dokploy Deployment

## Goal

Deploy the MRPeasy MCP server to Dokploy following the task 304 pattern.

## Context

The MRPeasy MCP server is containerized and tested. DEPLOY-02 requires Dokploy deployment following the task 304 pattern. The server is designed for:
- Single-node deployment (in-memory session store is sufficient)
- Environment-based configuration via MRPEASY_API_KEY, MRPEASY_API_SECRET, PORT

## Tasks

### 1. Create Dokploy Application

Using Dokploy MCP tools:
1. Create application in the appropriate project/environment
2. Configure as Docker build from GitHub repository
3. Set build path to `mcp/mrpeasy`

### 2. Configure Environment Variables

Set required environment variables:
- `MRPEASY_API_KEY` - MRPeasy API key
- `MRPEASY_API_SECRET` - MRPeasy API secret
- `PORT` - Port for the server (default 3000)
- `NODE_ENV` - Set to `production`
- `LOG_LEVEL` - Set to `info` for production

### 3. Configure Domain & SSL

Set up domain routing:
- Configure host domain
- Enable HTTPS with Let's Encrypt
- Port mapping to 3000

### 4. Deploy and Verify

Deploy the application:
1. Trigger initial deployment
2. Verify health check endpoint responds
3. Test MCP endpoint from external client

## Verification

- [ ] Application created in Dokploy
- [ ] Environment variables configured
- [ ] Domain configured with SSL
- [ ] Deployment successful
- [ ] Health check responds at /health
- [ ] MCP endpoint accessible at /mcp

## Files

No files modified - this is deployment configuration only.

## Notes

- Follow task 304 deployment pattern for consistency
- The server uses in-memory session store which is suitable for single-node deployment
- If high availability is needed later, consider external session store (Redis)
