---
plan: 05-01
phase: 05-testing-deployment
title: Docker Containerization & Testing
status: ready
requires: [DEPLOY-01, DEPLOY-04]
estimated_complexity: low
---

# Plan: Docker Containerization & Testing

## Goal

Create Docker containerization for production deployment and verify the MCP server works with MCP Inspector.

## Context

The MRPeasy MCP server is feature-complete with all 5 read tools, rate limiting, resilience patterns, and error handling. Phase 5 requirements:
- DEPLOY-01: Docker containerization (Must)
- DEPLOY-04: Environment-based configuration (Must)
- Health check endpoint already exists at /health (DEPLOY-03 satisfied)

## Tasks

### 1. Create Dockerfile

Create `mcp/mrpeasy/Dockerfile`:

```dockerfile
FROM node:20-alpine AS builder

WORKDIR /app

COPY package*.json ./
RUN npm ci

COPY tsconfig.json ./
COPY src ./src
RUN npm run build

FROM node:20-alpine AS runtime

WORKDIR /app

ENV NODE_ENV=production

COPY package*.json ./
RUN npm ci --omit=dev

COPY --from=builder /app/dist ./dist

EXPOSE 3000

CMD ["node", "dist/server.js"]
```

### 2. Create .dockerignore

Create `mcp/mrpeasy/.dockerignore`:

```
node_modules
dist
*.log
.env
.env.*
```

### 3. Update package.json scripts

Add Docker-related scripts:

```json
"scripts": {
  "docker:build": "docker build -t mrpeasy-mcp .",
  "docker:run": "docker run -p 3000:3000 --env-file .env mrpeasy-mcp"
}
```

### 4. Test with MCP Inspector

Manual testing checklist (document results):
- Start server: `npm run dev`
- Connect MCP Inspector to http://localhost:3000/mcp
- Verify session initialization
- Test each tool with valid input
- Test error handling with invalid input
- Verify health endpoint responds

## Verification

- [ ] `docker build` completes without errors
- [ ] Container starts and logs to stderr
- [ ] Health check endpoint responds from container
- [ ] Environment variables passed correctly to container
- [ ] TypeScript still compiles (`npm run typecheck`)

## Files

Create:
- `mcp/mrpeasy/Dockerfile`
- `mcp/mrpeasy/.dockerignore`

Modify:
- `mcp/mrpeasy/package.json` (add docker scripts)
